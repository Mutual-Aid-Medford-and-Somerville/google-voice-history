# Google Voice History

Generate a CSV of call and message history from a Google Voice Takeout.

## Installing

Download the latest version of [`src/google_voice_history.py`](./src/google_voice_history.py). Currently, the script only requires [Python 3.7](https://www.python.org/downloads/) or newer, so no further installation is required.

## Exporting Google Voice history

- Go to <https://takeout.google.com/>

- Under "Create a New Export", click "Deselect all", select "Voice", and click "Next step"

- Choose your preferred "Delivery method" and "Frequency"

- Select ".zip" and "50 GB" for "File type & size"

- Click "Create export"

- Wait for the export to complete, then download the `.zip` file
    - **NOTE**: It's not necesssary to unzip this file

The downloaded `.zip` file contains call history and text messages as `.html` files, plus `.mp3` files of voicemails. See the [`tests` directory](./tests) for an example.

## Generating a CSV

Run the script with the path to downloaded `.zip` file, saving the output to a `.csv` file:

```
$ python google_voice_history.py takeout.zip > google_voice_history.csv
```

This will parse the call and text history from the `.html` files without extracting them. See [`tests/history.csv`](./tests/history.csv) for an example.

To see detailed usage and a description of the columns in the CSV, run:

```
$ python google_voice_history.py -h
```

Currently, the CSV does **not** include phone numbers; instead, it includes a unique ID generated by the script. In the future, there could be an option to specify which columns to include/exclude.

## Developing

Set up your development environment:

- [Fork and clone](https://help.github.com/en/articles/fork-a-repo) this repository

- Create and activate a [virtual environment](https://docs.python.org/3/tutorial/venv.html)

- Install the packages required for development:

    ```
    $ python -m pip install -U setuptools pip wheel

    $ python -m pip install -r requirements.txt
    ```

    This will install:

    - [pytest](https://docs.pytest.org/en/latest/) to write and run tests
    - [black](https://black.readthedocs.io/en/stable/) and [isort](https://pycqa.github.io/isort/) to format the code
    - [flake8](http://flake8.pycqa.org/en/latest/) to check code style
    - [mypy](https://mypy.readthedocs.io/en/latest/) to check types
    - [invoke](https://www.pyinvoke.org/) to simplify running these tools

Run the tests:

```
$ pytest
```

Format the code and run the checks:

```
$ invoke format

$ invoke check
```
